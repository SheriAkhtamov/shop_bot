@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        /* Coffee Palette */
        --color-espresso: #3E2310;
        --color-latte: #8C735F;
        --color-foam: #F2E8DC;
        --color-paper: #FCF9F5;
        --color-caramel: #C6A992;
        --color-accent: #6B3F1E;
        --color-success: #4A6B36;
        --color-danger: #A33B20;
        --color-muted: #B09B8B;
    }

    body {
        font-family: 'Manrope', sans-serif;
        background-color: var(--color-foam);
        color: var(--color-espresso);
        background-image:
            radial-gradient(circle at 12% 8%, rgba(198, 169, 146, 0.35), transparent 45%),
            radial-gradient(circle at 88% 2%, rgba(62, 35, 16, 0.08), transparent 40%),
            url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
        /* Важно для iOS скролла */
        -webkit-overflow-scrolling: touch; 
    }

    /* Убираем выделение при тапе на мобильных */
    * {
        -webkit-tap-highlight-color: transparent;
        box-sizing: border-box;
    }

    img,
    svg {
        max-width: 100%;
        height: auto;
        display: block;
    }
}

@layer utilities {
    /* Скрытие скроллбара, но сохранение функционала */
    .hide-scroll {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }
    .hide-scroll::-webkit-scrollbar {
        display: none; /* Chrome, Safari and Opera */
    }

    /* Безопасные отступы для iPhone X+ */
    .pb-safe {
        padding-bottom: env(safe-area-inset-bottom, 20px);
    }
    .pt-safe {
        padding-top: env(safe-area-inset-top, 20px);
    }
    .bottom-safe {
        bottom: env(safe-area-inset-bottom, 20px);
    }

    .pb-nav {
        padding-bottom: calc(96px + env(safe-area-inset-bottom, 0px));
    }

    .bottom-nav {
        bottom: calc(92px + env(safe-area-inset-bottom, 0px));
    }
    
    /* Для стеклянных панелей */
    .glass {
        background: rgba(252, 249, 245, 0.75);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border-top: 1px solid rgba(255, 255, 255, 0.45);
    }

    /* Тени для "кофейной" темы */
    .shadow-soft {
        box-shadow: 0 18px 40px -16px rgba(62, 35, 16, 0.28);
    }
    .shadow-inner-soft {
        box-shadow: inset 0 2px 4px 0 rgba(62, 35, 16, 0.05);
    }
}

@layer components {
    /* Анимации */
    .animate-enter {
        animation: enter 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    }
    
    @keyframes enter {
        from { opacity: 0; transform: translateY(10px) scale(0.98); }
        to { opacity: 1; transform: translateY(0) scale(1); }
    }
    
    /* Кнопки-чипсы (категории) */
    .chip-btn {
        @apply px-4 py-2 rounded-full border border-[#E0CCB7] bg-white/80 text-[#8C735F] text-sm font-bold whitespace-nowrap transition-all duration-200;
    }
    .chip-btn.active {
        @apply bg-[#3E2310] text-white border-[#3E2310] shadow-lg shadow-[#3E2310]/20;
    }

    .page-header {
        background: rgba(242, 232, 220, 0.88);
        backdrop-filter: blur(12px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.55);
    }

    .card-surface {
        background: var(--color-paper);
        border: 1px solid rgba(107, 63, 30, 0.08);
        border-radius: 1.5rem;
        box-shadow: 0 18px 40px rgba(62, 35, 16, 0.12);
    }

    .card-muted {
        background: rgba(252, 249, 245, 0.7);
        border: 1px dashed rgba(107, 63, 30, 0.18);
        border-radius: 1.5rem;
    }

    .btn-primary {
        background: linear-gradient(135deg, #3E2310, #6B3F1E);
        color: #ffffff;
        border-radius: 1rem;
        font-weight: 700;
        box-shadow: 0 16px 30px rgba(62, 35, 16, 0.25);
    }

    .btn-secondary {
        background: linear-gradient(135deg, #4A6B36, #5C7E44);
        color: #ffffff;
        border-radius: 1rem;
        font-weight: 700;
        box-shadow: 0 16px 30px rgba(74, 107, 54, 0.2);
    }

    .btn-outline {
        border: 1px solid rgba(107, 63, 30, 0.2);
        color: #6B3F1E;
        border-radius: 1rem;
        background: rgba(252, 249, 245, 0.8);
    }

    .input-surface {
        background: rgba(252, 249, 245, 0.95);
        border: 1px solid rgba(107, 63, 30, 0.14);
        border-radius: 1rem;
        color: #3E2310;
    }

    .pill {
        border-radius: 9999px;
        padding: 0.35rem 0.85rem;
        font-weight: 700;
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
    }

    .product-card {
        display: flex;
        flex-direction: column;
        min-height: 100%;
    }
}
